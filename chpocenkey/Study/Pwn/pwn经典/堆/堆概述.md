## 定义
在程序运行过程中，堆提供动态分配的内存，允许程序申请大小未知的内存

堆是程序虚拟地址空间的一块连续的由低地址向高地址方向增长的线性区域

管理堆的程序被称为堆管理器

堆管理器位于用户程序与内核中间，主要做以下工作

- 响应用户的申请内核请求，向操作系统申请内存，然后返回给用户程序。内核会预先分配很大一部分的连续内存，让堆管理器管理这块内存。只有出现堆空间不足的情况，堆管理器才会再次与操作系统进行交互
- 管理用户释放的内存。用户释放的内存由堆管理器进行管理，可以用来响应用户新申请的内存的请求

## 堆管理器
`ptmalloc` 由 Wolfram Gloger 在 Doug Lea 的基础上进行改进使其可以支持多线程

在 `glibc-2.3.x` 之后， `glibc` 中集成了 `ptmalloc2`

目前 Linux 标准发行版中使用的堆管理器是 `glibc` 中的堆管理器 `ptmalloc2` 。 `ptmalloc2` 主要通过 `malloc() / free()` 函数分配和释放内存块

## 总结
在内存分配与使用的过程中，Linux 有这样的一个基本内存管理思想，**只有当真正访问一个地址的时候，系统才会建立虚拟页面与物理页面的映射关系**。 

所以虽然操作系统已经给程序分配了很大的一块内存，但是这块内存其实只是虚拟内存。只有当用户使用到相应的内存时，系统才会真正分配物理页面给用户使用。