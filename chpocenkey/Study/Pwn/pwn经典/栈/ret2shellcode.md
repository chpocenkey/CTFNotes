## 原理

控制程序执行 `shellcode` 代码

`shellcode` 代码是自行编写的一段后门函数，需要自行向内存中填充一些可执行的代码，然后劫持程序控制流返回执行这段恶意代码

## 条件

- 对应的二进制程序运行时， `shellcode` 所在的区域具有可执行权限
- 在新版内核中引入了较为激进的保护措施，程序中通常不再默认有同时具有可写与可执行的段，使得传统的 `ret2shellcode` 手法不再能直接未完成利用
## 过程
1. 构造 `shellcode` 通过溢出放到程序某片存储空间上（所存储的空间现需要有可执行权限）
2. 将返回地址劫持到构造的 `shellcode` 地址使得程序开始执行恶意代码

## 解题技巧

1. `check` 检测程序开启的保护
2. 使用 `IDA` 对程序进行反编译
3. 查看程序漏洞，发现字符串的写入
4. 查看字符串写入的位置，是在 `.bss` 段
5. 通过 `gdb` 中的 `vmmap` 查看 `.bss` 段是否为可写可执行
6. 可以通过 [[mprotect]] 函数修改一段指定内存区域的保护属性